<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Show CAPTCHA</title>
    <!-- Load the reCAPTCHA enterprise script with your site key -->
    <script src="https://www.google.com/recaptcha/enterprise.js?render=6LdHzQ8pAAAAAJ-xu-QslvYliAQVQYBj9csMmyzn"></script>
    <script>
        var startTime; // Declare startTime to record the time when the page is fully loaded

        // Function to set the startTime; it is called when the page loads
        function startTimer() {
            startTime = Date.now();
        }

        // Function to calculate time taken when the form is submitted
        function calculateTimeTaken() {
            var endTime = Date.now();
            var timeTaken = (endTime - startTime) / 1000; // Convert to seconds
            document.getElementById('timeTaken').value = timeTaken;
        }

        // Set the startTime as soon as the window loads
        window.onload = startTimer;

        // Ensure that the time calculation is done right before form submission
        document.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById('captchaForm').onsubmit = calculateTimeTaken;
        });

        function onSubmit(token) {
            document.getElementById('recaptchaResponse').value = token;
            document.getElementById('captchaForm').submit();
        }
    </script>
</head>
<body>
    <form id="captchaForm" action="{{ url_for('verify_captcha') }}" method="post">
        <!-- reCAPTCHA widget container -->
        <button class="g-recaptcha" 
                data-sitekey="YOUR_SITE_KEY" 
                data-callback="onSubmit"
                data-action="submit">Verify CAPTCHA</button>
        <input type="text" name="captcha_response" placeholder="Enter CAPTCHA here" style="display: none;"> <!-- Hidden as reCAPTCHA will be used -->
        <input type="hidden" id="timeTaken" name="time_taken" value=""> <!-- This will be set by the calculateTimeTaken function -->
        <input type="hidden" name="captcha_type" value="exampleType"> <!-- Replace exampleType with actual captcha type -->
        <!-- Hidden field to capture the reCAPTCHA response -->
        <input type="hidden" id="recaptchaResponse" name="recaptcha_response">
    </form>
</body>
</html>
